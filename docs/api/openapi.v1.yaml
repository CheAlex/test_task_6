openapi: 3.0.0
info:
  title: 'Card payment service'
  description: Service that implements integration with payment gateways
  version: 1.0.0
tags:
  - name: Card payment service
    description: Operations related to card payments
paths:
  /v1/payment/{paymentGatewaySlug}:
    post:
      tags:
        - Card payment service
      description: 'Create card payment.'
      operationId: CreateCardPayment
      parameters:
        -
          $ref: '#/components/parameters/AcceptHeader'
        - in: path
          name: paymentGatewaySlug
          required: true
          schema:
            type: string
      requestBody:
        description: 'Input data format'
        content:
          application/json:
            schema:
              $ref: request/V1/Payment/CreatePaymentRequest.yaml
      responses:
        '200':
          description: Created
          content:
            application/json:
              schema:
                $ref: response/V1/Payment/CreatePaymentResponse.yaml
        '422':
          description: 'Unprocessable entity'
          content:
            application/json:
              schema:
                $ref: '#/components/schemas/UnprocessableEntityResponse'
components:
  parameters:
    AcceptHeader:
      name: Accept
      in: header
      required: true
      schema:
        type: string
        enum:
          - application/json
  schemas:
    UnprocessableEntityResponse:
      description: 'Unprocessable entity response (implements RFC7807 https://tools.ietf.org/html/rfc7807)'
      properties:
        type:
          description: "A URI reference that uniquely identifies the problem type only in the context of the provided API. Opposed to the specification in RFC-7807, it is neither recommended to be dereferenceable and point to a human-readable documentation nor globally unique for the problem type.\n"
          type: string
          format: uri-reference
          default: 'about:blank'
          example: /problem/connection-error
        title:
          description: "A short summary of the problem type. Written in English and readable for engineers, usually not suited for non technical stakeholders and not localized.\n"
          type: string
          example: 'Bad request'
        status:
          description: "The HTTP status code generated by the origin server for this occurrence of the problem.\n"
          type: integer
          format: int32
          maximum: 500
          exclusiveMaximum: true
          minimum: 400
          example: 400
        detail:
          description: "A human readable explanation specific to this occurrence of the problem that is helpful to locate the problem and give advice on how to proceed. Written in English and readable for engineers, usually not suited for non technical stakeholders and not localized.\n"
          type: string
          example: 'Connection to database timed out'
          nullable: true
        instance:
          description: "A URI reference that identifies the specific occurrence of the problem, e.g. by adding a fragment identifier or sub-path to the problem type. May be used to locate the root of this problem in the source code.\n"
          type: string
          format: uri-reference
          example: '/problem/connection-error#token-info-read-timed-out'
          nullable: true
        violations:
          type: array
          items:
            $ref: '#/components/schemas/ConstraintViolation'
        code:
          type: string
          nullable: true
      type: object
    ConstraintViolation:
      properties:
        propertyPath:
          type: string
          default: ''
          example: object1.object2.field1
        title:
          type: string
          default: ''
        parameters:
          type: object
          example:
            '{{ value1 }}': value1
            '{{ value2 }}': value2
          additionalProperties:
            type: string
        type:
          description: 'UUID type'
          type: string
          default: ''
          example: 'urn:uuid:01380c23-8358-4e70-8ad3-e395d7152549'
          nullable: true
      type: object
